{
    "name": "update_phase",
    "description": "Update the current case phase based on conversation context",
    "type": "UpdatePhaseTool",
    "category": "system",
    "cacheable": false,
    "parameter": {
        "type": "object",
        "properties": {
            "current_phase": {
                "type": "string",
                "enum": [
                    "information_gathering",
                    "differential_diagnosis",
                    "tests_management",
                    "feedback"
                ],
                "description": "The current phase of the case"
            },
            "phase_locked": {
                "type": "boolean",
                "description": "Whether the phase is locked (student must complete current phase)"
            },
            "phase_progress": {
                "type": "number",
                "minimum": 0.0,
                "maximum": 1.0,
                "description": "Progress within current phase (0.0-1.0)"
            },
            "phase_guidance": {
                "type": "string",
                "description": "Specific guidance for the current phase"
            },
            "completion_criteria": {
                "type": "array",
                "items": {
                    "type": "string"
                },
                "description": "Criteria for completing the current phase"
            },
            "transition_reason": {
                "type": "string",
                "enum": [
                    "completion_signal",
                    "user_request",
                    "content_analysis",
                    "tutor_decision",
                    "explicit_command"
                ],
                "description": "Reason for phase transition"
            }
        },
        "required": [
            "current_phase",
            "phase_locked",
            "phase_progress",
            "phase_guidance"
        ]
    },
    "llm_config": {
        "max_new_tokens": 100,
        "temperature": 0.1
    }
}