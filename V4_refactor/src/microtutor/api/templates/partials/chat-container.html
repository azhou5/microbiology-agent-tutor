<!-- Chat Container -->
<!-- Related JS modules: chat.js, voice.js, mcq.js -->
<div class="chat-container">
    <div id="chatbox" class="chatbox">
        <div class="welcome-message">
            <p>ğŸ‘‹ Welcome to MicroTutor V4!</p>
            <p>Select an organism above and click "Start New Case" to begin your interactive microbiology case study.
            </p>
        </div>
    </div>

    <div id="input-area" class="input-area">
        <textarea id="user-input" placeholder="Enter your message or use voice..." rows="1" disabled></textarea>
        <div class="button-group">
            <button id="voice-btn" class="btn btn-voice" title="Click to start/stop recording">
                ğŸ¤ Voice
            </button>
            <button id="send-btn" class="btn btn-success" disabled>
                <span class="btn-icon">ğŸ“¤</span> Send
            </button>
            <button id="finish-btn" class="btn btn-warning" disabled>
                <span class="btn-icon">ğŸ</span> Finish Case
            </button>
        </div>
        <div class="voice-controls">
            <p id="voice-status" class="voice-status">ğŸ¤ Initializing...</p>
            <audio id="response-audio" controls hidden></audio>
        </div>
    </div>
</div>

<!-- Post-Case Assessment Section -->
<div id="assessment-section" class="assessment-section" style="display: none;">
    <div class="assessment-header">
        <h3>ğŸ“ Post-Case Assessment</h3>
        <p class="assessment-subtitle">Test your understanding with targeted MCQs based on your case performance.</p>
        <button id="generate-mcqs-btn" class="btn btn-primary btn-large">
            <span class="btn-icon">ğŸ¯</span> Generate Assessment MCQs
        </button>
    </div>

    <div id="assessment-loading" class="assessment-loading" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Analyzing your conversation and generating targeted MCQs...</p>
    </div>

    <div id="mcq-container" class="mcq-assessment-container" style="display: none;">
        <div class="mcq-score-header">
            <div class="score-display">
                <span class="score-label">Score:</span>
                <span id="mcq-score" class="score-value">0 / 0</span>
            </div>
            <div class="score-progress">
                <div id="score-progress-bar" class="score-progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <div id="mcq-questions-list" class="mcq-questions-list">
            <!-- MCQ questions will be dynamically inserted here -->
        </div>

        <div id="mcq-results-summary" class="mcq-results-summary" style="display: none;">
            <h4>ğŸ“Š Assessment Complete!</h4>
            <div class="results-stats">
                <div class="stat-item">
                    <span class="stat-value" id="final-score">0%</span>
                    <span class="stat-label">Overall Score</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="correct-count">0</span>
                    <span class="stat-label">Correct</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="incorrect-count">0</span>
                    <span class="stat-label">Incorrect</span>
                </div>
            </div>
            <div class="weak-areas-summary" id="weak-areas-summary">
                <h5>Areas to Review:</h5>
                <ul id="weak-areas-list"></ul>
            </div>
            <div class="results-actions">
                <button id="retry-assessment-btn" class="btn btn-primary">
                    <span class="btn-icon">ğŸ”„</span> Generate New Questions
                </button>
                <button id="start-new-case-btn" class="btn btn-success">
                    <span class="btn-icon">ğŸ†•</span> Start New Case
                </button>
            </div>
        </div>
    </div>
</div>